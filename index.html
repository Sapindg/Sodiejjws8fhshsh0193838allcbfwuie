<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Alberto AI - Sistema Beta</title>
    <style>
        /* ----------------------------------------------------------------------------------- */
        /* VARIÁVEIS E BASE */
        /* ----------------------------------------------------------------------------------- */
        :root {
            --cor-branca: #FFFFFF;
            --cor-cinza: #333333;
            --cor-azul: #007BFF;
            --cor-fundo-claro: #F0F2F5;
            --cor-fundo-escuro: #121212;
            --cor-card-claro: var(--cor-branca);
            --cor-card-escuro: #1E1E1E;
            --cor-texto-claro: #000000;
            --cor-texto-escuro: var(--cor-branca);
            --cor-aviso: #6c757d;
            --transicao: all 0.3s ease-in-out;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: var(--cor-fundo-claro);
            color: var(--cor-texto-claro);
            transition: background-color 0.5s, color 0.5s;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* ----------------------------------------------------------------------------------- */
        /* MODO ESCURO */
        /* ----------------------------------------------------------------------------------- */
        body.dark-mode {
            background-color: var(--cor-fundo-escuro);
            color: var(--cor-texto-escuro);
        }

        .dark-mode .container-login, .dark-mode #sidebar {
            background-color: var(--cor-card-escuro);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        .dark-mode input[type="text"], .dark-mode textarea {
            background-color: #333;
            color: var(--cor-texto-escuro);
            border: 1px solid #555 !important;
        }

        .dark-mode input::placeholder, .dark-mode textarea::placeholder, .dark-mode .botao-menu {
            color: #AAAAAA;
        }
        
        /* ----------------------------------------------------------------------------------- */
        /* ANIMAÇÕES */
        /* ----------------------------------------------------------------------------------- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
        }

        @keyframes pulseBlue {
            0% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 123, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0); }
        }

        /* ----------------------------------------------------------------------------------- */
        /* ESTILOS DE TELA COMUM */
        /* ----------------------------------------------------------------------------------- */
        .container-login, #main-hud {
            width: 90%;
            max-width: 400px;
            box-sizing: border-box;
            transition: var(--transicao);
        }

        .container-login {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px;
            background-color: var(--cor-card-claro);
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* Campos de Input e Botões */
        input[type="text"], #message-input {
            width: 100%;
            padding: 15px;
            margin: 15px 0;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            font-size: 1.1em;
            text-align: center;
            box-sizing: border-box;
            transition: var(--transicao);
            resize: none;
        }

        /* TÍTULO LOGIN */
        #login-title {
            font-size: 2.5em;
            font-weight: 700;
            color: var(--cor-azul);
            margin-bottom: 30px;
            opacity: 0; 
            letter-spacing: 1px;
        }

        /* BOTÃO AZUL ACESSAR */
        #acessar-button {
            background-color: var(--cor-azul);
            color: var(--cor-branca);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            /* CORREÇÃO: Usamos display none/block no JS e animamos a opacidade */
            display: none; 
            opacity: 0;
            margin-top: 10px;
            transition: var(--transicao);
        }

        #acessar-button.show {
             opacity: 1;
             pointer-events: auto;
        }

        #acessar-button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            animation: pulseBlue 1.5s infinite;
        }

        /* Aviso Beta */
        #beta-notice {
            position: fixed;
            top: 20px;
            background-color: var(--cor-aviso);
            color: var(--cor-branca);
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 1000;
            opacity: 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        /* ----------------------------------------------------------------------------------- */
        /* HUD PRINCIPAL */
        /* ----------------------------------------------------------------------------------- */
        #main-hud {
            display: none; 
            flex-direction: column;
            min-height: 100vh;
            opacity: 0;
            position: relative;
        }

        .header-hud {
            display: flex;
            justify-content: flex-start;
            padding: 15px;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .botao-menu {
            background: none;
            border: none;
            font-size: 2em;
            color: var(--cor-cinza);
            cursor: pointer;
            transition: var(--transicao);
        }

        .content-center {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }

        .titulo-pergunta {
            font-size: 1.6em;
            color: var(--cor-azul);
            margin-bottom: 25px;
        }

        .input-area {
            width: 100%;
            display: flex;
            padding: 0 10px 20px 10px;
        }

        .input-mensagem {
            flex-grow: 1;
            border-radius: 10px 0 0 10px !important;
            text-align: left !important;
            min-height: 50px;
        }

        .botao-enviar {
            background-color: var(--cor-azul);
            color: var(--cor-branca);
            border: none;
            padding: 10px 15px;
            border-radius: 0 10px 10px 0;
            font-size: 1.5em;
            cursor: pointer;
            transition: var(--transicao);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* ----------------------------------------------------------------------------------- */
        /* SIDEBAR */
        /* ----------------------------------------------------------------------------------- */
        #sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 80%;
            max-width: 300px;
            background-color: var(--cor-card-claro);
            box-shadow: 4px 0 15px rgba(0, 0, 0, 0.15);
            transform: translateX(-100%);
            transition: transform 0.4s ease-in-out;
            z-index: 100;
            display: flex;
            flex-direction: column;
            padding: 20px 0;
        }

        #sidebar.open {
            transform: translateX(0);
        }

        .sidebar-header, .sidebar-content {
            padding: 0 20px;
        }
        
        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid #E0E0E0;
            margin-bottom: 15px;
        }
        
        .new-chat-button {
            width: 100%;
            padding: 12px;
            background-color: var(--cor-azul);
            color: var(--cor-branca);
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            margin-bottom: 20px;
            cursor: pointer;
            transition: var(--transicao);
        }

        .chat-item {
            padding: 10px 5px;
            margin-bottom: 5px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 0.95em;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            transition: background-color 0.2s;
        }

        .chat-item:hover {
            background-color: var(--cor-fundo-claro);
        }

        #sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 90;
            display: none;
            opacity: 0;
            transition: opacity 0.4s;
        }

        /* TOGGLE Dark Mode (Estilos Minimizados) */
        .dark-mode-toggle { position: relative; display: inline-block; width: 45px; height: 25px; }
        .dark-mode-toggle input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: 0.4s; border-radius: 25px; }
        .slider:before { position: absolute; content: ""; height: 19px; width: 19px; left: 3px; bottom: 3px; background-color: white; transition: 0.4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--cor-azul); }
        input:checked + .slider:before { transform: translateX(20px); }
    </style>
</head>
<body>

    <div id="beta-notice">Esta AI está em fase beta!</div>

    <div id="login-screen" class="container-login">
        <h1 id="login-title">Alberto AI</h1>
        <input type="text" id="nickname-input" placeholder="Insira seu Nickname/Code" maxlength="30">
        <button id="acessar-button">Acessar</button>
    </div>

    <div id="main-hud">
        <div class="header-hud">
            <button id="menu-toggle" class="botao-menu">=</button>
        </div>

        <div class="content-center">
            <div class="titulo-pergunta">Faça uma pergunta para o Alberto!</div>
            </div>

        <div class="input-area">
            <textarea id="message-input" class="input-mensagem" placeholder="Digite sua mensagem..." rows="1"></textarea>
            <button class="botao-enviar" disabled>➤</button>
        </div>
    </div>

    <div id="sidebar">
        <div class="sidebar-header">
            <span class="sidebar-title">Menu</span>
            <div class="toggle-container">
                <label class="toggle-label">Modo Escuro</label>
                <label class="dark-mode-toggle">
                    <input type="checkbox" id="dark-mode-checkbox">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        <div class="sidebar-content">
            <button class="new-chat-button" id="new-chat-btn">Iniciar Novo Chat</button>
            <div class="chat-list-title">Conversas Anteriores (<span id="login-id-display">Nenhum Login</span>)</div>
            <div id="chat-history-list">
                </div>
        </div>
    </div>

    <div id="sidebar-overlay"></div>

    <script>
        // -----------------------------------------------------------------------------------
        // VARIÁVEIS E CONSTANTES
        // -----------------------------------------------------------------------------------
        const loginTitle = document.getElementById('login-title');
        const nicknameInput = document.getElementById('nickname-input');
        const acessarButton = document.getElementById('acessar-button');
        const loginScreen = document.getElementById('login-screen');
        const mainHud = document.getElementById('main-hud');
        const betaNotice = document.getElementById('beta-notice');
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        const darkModeCheckbox = document.getElementById('dark-mode-checkbox');
        const chatHistoryList = document.getElementById('chat-history-list');
        const loginIdDisplay = document.getElementById('login-id-display');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.querySelector('.botao-enviar');

        const ACCESS_CODES = ['Rmt-22AnJkLL', 'Rat-28kLoPPi'];
        const KEY_CURRENT_LOGIN = 'alberto_ai_current_login';
        const KEY_DARK_MODE = 'alberto_ai_dark_mode';
        const KEY_FIRST_ACCESS = (loginId) => `alberto_ai_${loginId}_first_access`;
        const KEY_CHATS = (loginId) => `alberto_ai_${loginId}_chats`;

        let currentLoginId = localStorage.getItem(KEY_CURRENT_LOGIN) || null;

        // -----------------------------------------------------------------------------------
        // FUNÇÕES DE ANIMAÇÃO E ACESSO
        // -----------------------------------------------------------------------------------

        /**
         * Inicializa a sequência de login (Fade In do Título e Input).
         */
        function initializeLoginSequence() {
            // 1. Fade In do Título "Alberto AI"
            setTimeout(() => {
                loginTitle.style.animation = 'fadeIn 1s ease-out forwards';
            }, 100);

            // 2. Após 2s, Fade In do campo de texto
            setTimeout(() => {
                nicknameInput.style.animation = 'fadeIn 0.7s ease-out forwards';
            }, 2000);
        }

        /**
         * Trata a visibilidade e animação do botão "Acessar".
         */
        nicknameInput.addEventListener('input', () => {
            const isCodeValid = ACCESS_CODES.includes(nicknameInput.value.trim());

            // A MÁGICA da correção é usar `display: block` e a classe `.show`
            if (isCodeValid) {
                if (acessarButton.style.display !== 'block') {
                    acessarButton.style.display = 'block';
                    // Pequeno delay para garantir que o display mude antes da transição de opacidade
                    setTimeout(() => acessarButton.classList.add('show'), 10);
                }
            } else {
                acessarButton.classList.remove('show');
                setTimeout(() => {
                     // Esconde após a transição
                     acessarButton.style.display = 'none';
                }, 300); 
            }
            acessarButton.disabled = !isCodeValid;
        });

        /**
         * Lógica principal de Acesso.
         */
        acessarButton.addEventListener('click', () => {
            const enteredCode = nicknameInput.value.trim();

            if (ACCESS_CODES.includes(enteredCode)) {
                currentLoginId = enteredCode;
                localStorage.setItem(KEY_CURRENT_LOGIN, currentLoginId);

                // 1. Esconde a tela de login
                loginScreen.style.animation = 'fadeOut 0.5s ease-in forwards';

                setTimeout(() => {
                    loginScreen.style.display = 'none';

                    // 2. Mostra o aviso Beta se for o primeiro acesso
                    showBetaNotice(enteredCode);

                    // 3. Mostra o HUD principal
                    loadMainHud();
                }, 500);
            }
        });

        /**
         * Exibe o aviso "Esta AI está em fase beta!" com Fade In/Out.
         */
        function showBetaNotice(loginId) {
            const isFirstAccess = localStorage.getItem(KEY_FIRST_ACCESS(loginId)) === null;

            if (isFirstAccess) {
                localStorage.setItem(KEY_FIRST_ACCESS(loginId), 'false');

                // Fade In
                betaNotice.style.animation = 'fadeIn 0.5s ease-out forwards';

                // Fade Out após 3s
                setTimeout(() => {
                    betaNotice.style.animation = 'fadeOut 0.5s ease-in forwards';
                }, 3000);

                setTimeout(() => {
                    betaNotice.style.opacity = '0';
                    betaNotice.style.animation = 'none';
                }, 3500);
            }
        }

        /**
         * Carrega a tela principal.
         */
        function loadMainHud() {
            mainHud.style.display = 'flex';
            setTimeout(() => {
                mainHud.style.opacity = '1';
            }, 50);

            loadSettings();
            loadChatHistory();
        }

        // -----------------------------------------------------------------------------------
        // LÓGICA DE HUD E SIDEBAR
        // -----------------------------------------------------------------------------------

        menuToggle.addEventListener('click', openSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);

        function openSidebar() {
            sidebar.classList.add('open');
            sidebarOverlay.style.display = 'block';
            setTimeout(() => sidebarOverlay.style.opacity = '1', 10);
        }

        function closeSidebar() {
            sidebar.classList.remove('open');
            sidebarOverlay.style.opacity = '0';
            setTimeout(() => sidebarOverlay.style.display = 'none', 400);
        }

        /**
         * Lógica do Dark Mode.
         */
        darkModeCheckbox.addEventListener('change', () => {
            if (darkModeCheckbox.checked) {
                document.body.classList.add('dark-mode');
                localStorage.setItem(KEY_DARK_MODE, 'dark');
            } else {
                document.body.classList.remove('dark-mode');
                localStorage.setItem(KEY_DARK_MODE, 'light');
            }
        });

        /**
         * Carrega as configurações (Dark Mode) do localStorage.
         */
        function loadSettings() {
            const savedMode = localStorage.getItem(KEY_DARK_MODE);
            if (savedMode === 'dark') {
                document.body.classList.add('dark-mode');
                darkModeCheckbox.checked = true;
            } else {
                document.body.classList.remove('dark-mode');
                darkModeCheckbox.checked = false;
            }
        }

        /**
         * Simula o carregamento e salvamento de conversas.
         */
        function loadChatHistory() {
            loginIdDisplay.textContent = currentLoginId;
            chatHistoryList.innerHTML = '';
            
            let chats = JSON.parse(localStorage.getItem(KEY_CHATS(currentLoginId))) || [];
            
            if (chats.length === 0) {
                // Simula conversas iniciais
                chats = [
                    { id: Date.now() - 2000, title: "Futuro da AI e a sociedade" },
                    { id: Date.now() - 1000, title: "Novo Projeto - Alberto v2" }
                ];
                localStorage.setItem(KEY_CHATS(currentLoginId), JSON.stringify(chats));
            }

            chats.forEach(chat => {
                const item = document.createElement('div');
                item.className = 'chat-item';
                item.textContent = chat.title;
                item.addEventListener('click', () => {
                    console.log('Carregar conversa:', chat.id);
                    closeSidebar();
                });
                chatHistoryList.appendChild(item);
            });
        }

        /**
         * Auto-ajusta a altura do textarea de mensagem.
         */
        messageInput.addEventListener('input', () => {
            messageInput.style.height = 'auto'; 
            messageInput.style.height = (messageInput.scrollHeight) + 'px';
            messageInput.style.maxHeight = '200px'; 
            
            sendButton.disabled = messageInput.value.trim() === '';
        });
        
        // Ação do botão de enviar (A ser implementada)
        sendButton.addEventListener('click', () => {
            const message = messageInput.value.trim();
            if (message) {
                console.log('Mensagem enviada:', message);
                
                messageInput.value = '';
                messageInput.style.height = '50px'; 
                sendButton.disabled = true;
            }
        });

        // -----------------------------------------------------------------------------------
        // INICIALIZAÇÃO
        // -----------------------------------------------------------------------------------

        function init() {
            if (currentLoginId && ACCESS_CODES.includes(currentLoginId)) {
                // Usuário já logado e código válido
                loginScreen.style.display = 'none';
                loadMainHud();
            } else {
                // Inicia a sequência de login
                initializeLoginSequence();
            }
        }

        window.onload = init;

    </script>
</body>
</html>